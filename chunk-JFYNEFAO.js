import{a as ee,b as te}from"./chunk-7HMRDT6Y.js";import{a as Q,b as H,c as W,d as X,e as Y,f as Z}from"./chunk-WK274B67.js";import{a as q,b as G}from"./chunk-SOUYIAI6.js";import"./chunk-PBY3JU35.js";import{a as J,b as K}from"./chunk-GVFXADYD.js";import{a as U}from"./chunk-JJQTQM5B.js";import"./chunk-3LEAUZE5.js";import{n as B,o as N}from"./chunk-LJW6TDUS.js";import"./chunk-U4YWP6KT.js";import"./chunk-P4QSJQM7.js";import"./chunk-XSSXK7EZ.js";import"./chunk-7J7XJZ7Y.js";import"./chunk-MV5KNEQQ.js";import"./chunk-RSZHZ2NF.js";import{d as D,e as A,f as $}from"./chunk-C6BRYRYM.js";import{a as j,c as R}from"./chunk-O3TBEYO6.js";import"./chunk-6ICFUDYJ.js";import"./chunk-2TSUYDBP.js";import"./chunk-7EHZQ6MH.js";import"./chunk-X7OLMZPY.js";import"./chunk-VELDXNG4.js";import"./chunk-OKHOSK7W.js";import{e as E,i as z,n as O}from"./chunk-MFXFRBM3.js";import{m as F,p as P,s as L}from"./chunk-6M6X6DMA.js";import{Cb as x,Db as s,Fb as C,Mb as T,Nb as k,Ob as v,Ra as p,Sa as b,Xb as M,Yb as I,_b as V,ba as S,cb as g,fb as f,ka as c,kb as w,la as d,lb as i,mb as n,nb as u,rb as h,ub as _,vb as m}from"./chunk-OK7OUPQM.js";import"./chunk-JQ2Q4TV4.js";var ie=()=>[10,25,50],ne=()=>["titulo","criado_por.nome"],oe=()=>[1,2,3];function ae(o,l){if(o&1){let r=h();i(0,"div",19)(1,"p-iconField",20),u(2,"input",21,3),i(4,"p-inputIcon",22)(5,"i",23),_("click",function(){c(r);let t=x(3);m();let a=x(1);return d(a.filterGlobal(t.value,"contains"))}),n()()()()}}function le(o,l){o&1&&(i(0,"tr")(1,"th"),s(2,"T\xEDtulo"),n(),i(3,"th"),s(4,"Criado por"),n(),i(5,"th"),s(6,"Status"),n(),i(7,"th"),s(8,"Modera\xE7\xE3o"),n()())}function se(o,l){if(o&1){let r=h();i(0,"tr")(1,"td"),s(2),n(),i(3,"td"),s(4),n(),i(5,"td"),u(6,"p-tag",24,4),n(),i(8,"td")(9,"p-button",25),_("onClick",function(){let t=c(r).$implicit,a=m(2);return d(a.see(t.id,t))}),n(),i(10,"p-button",26),_("onClick",function(){let t=c(r).$implicit,a=m(2);return d(a.confirmAction("aprovar",t.id))}),n(),i(11,"p-button",27),_("onClick",function(){let t=c(r).$implicit,a=m(2);return d(a.confirmAction("rejeitar",t.id))}),n()()()}if(o&2){let r,e,t=l.$implicit,a=x(7),y=m(2);p(2),C(" ",t.titulo,""),p(2),C(" ",t.criado_por==null?null:t.criado_por.nome," "),p(2),f("rounded",!0)("value",(r=t.moderacao==null?null:t.moderacao.status)!==null&&r!==void 0?r:"indefinido")("severity",y.getSeverity((e=a.value)!==null&&e!==void 0?e:"")),p(3),f("rounded",!0)("text",!0),p(),f("rounded",!0)("text",!0)("disabled",(t.moderacao==null?null:t.moderacao.status)=="aprovado"),p(),f("rounded",!0)("text",!0)("disabled",(t.moderacao==null?null:t.moderacao.status)=="rejeitado")}}function pe(o,l){o&1&&(i(0,"tr")(1,"td",28),s(2,"Nenhuma vaga."),n()())}function me(o,l){if(o&1){let r=h();i(0,"p-table",14,2),_("onLazyLoad",function(t){c(r);let a=m();return d(a.onLazyLoad(t))}),g(2,ae,6,0,"ng-template",15)(3,le,9,0,"ng-template",16)(4,se,12,13,"ng-template",17),i(5,"div"),s(6),n(),g(7,pe,3,0,"ng-template",18),n()}if(o&2){let r,e=l.ngIf,t=m();f("rows",t.rows)("rowsPerPageOptions",v(12,ie))("paginator",!0)("showCurrentPageReport",!0)("totalRecords",t.totalVagas)("first",t.first)("lazy",!0)("pageLinks",5)("lazyLoadOnInit",!1)("globalFilterFields",v(13,ne))("value",(r=e.data==null?null:e.data.content)!==null&&r!==void 0?r:v(14,oe)),p(6),C(" ",t.setTotalRecords(e.data==null?null:e.data.totalElements)," ")}}function ce(o,l){o&1&&(i(0,"tr")(1,"th"),s(2,"T\xEDtulo"),n(),i(3,"th"),s(4,"Criado por"),n(),i(5,"th"),s(6,"Status"),n(),i(7,"th"),s(8,"Modera\xE7\xE3o"),n()())}function de(o,l){o&1&&(i(0,"tr")(1,"td"),u(2,"p-skeleton"),n(),i(3,"td"),u(4,"p-skeleton"),n(),i(5,"td"),u(6,"p-skeleton"),n(),i(7,"td"),u(8,"p-skeleton"),n()())}function ue(o,l){if(o&1){let r=h();i(0,"p-table",29),_("onPage",function(t){c(r);let a=m();return d(a.onPage(t))}),g(1,ce,9,0,"ng-template",16)(2,de,9,0,"ng-template",17),n()}if(o&2){let r=m();f("rows",r.rows)("rowsPerPageOptions",v(9,ie))("paginator",!0)("showCurrentPageReport",!0)("first",r.first)("lazy",!0)("pageLinks",5)("globalFilterFields",v(10,ne))("value",v(11,oe))}}function _e(o,l){o&1&&u(0,"i",31)}function ge(o,l){o&1&&u(0,"i",32)}function fe(o,l){if(o&1&&(i(0,"div",30),g(1,_e,1,0,"i",31)(2,ge,1,0,"i",32),i(3,"p"),s(4),n()()),o&2){let r=l.$implicit;p(),w(r.message=="aprovar"?1:2),p(3),C("Quero ",r.message," esta vaga")}}function xe(o,l){if(o&1){let r=h();i(0,"div",33)(1,"button",34),_("click",function(){c(r),m();let t=x(19);return d(t.reject())}),n(),i(2,"button",35),_("click",function(){c(r),m();let t=x(19);return d(t.accept())}),n()()}}var Je=(()=>{let l=class l{constructor(e,t,a,y,re){this.apiService=e,this.messageService=t,this.confirmationService=a,this.route=y,this.router=re,this.vagas$=this.apiService.getAllReceived(),this.subscriptions=[],this.title="Vagas Recebidas",this.first=0,this.totalVagas=10,this.rows=10,this.search=""}ngOnInit(){}stringify(e){let t=JSON.stringify(e);return console.log(t),t}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}see(e,t){this.router.navigate(["demo/vagas/"+e])}confirmAction(e,t){this.confirmationService.confirm({header:"Confirme a a\xE7\xE3o",message:e,accept:()=>e=="aprovar"?this.accept(t):this.reject(t)})}accept(e){let t=this.apiService.approveJob([e]).subscribe({next:a=>{this.messageService.add({severity:"success",detail:"Vaga aceita",key:"demo-main"}),this.reloadTable()},error:a=>{this.messageService.add({severity:"error",summary:"Oops",detail:a.error?.message??"Um erro ocorreu. Tente novamente",key:"demo-main"})}});this.subscriptions.push(t)}reject(e){let t=this.apiService.rejectJob([e]).subscribe({next:a=>{this.messageService.add({severity:"success",detail:"Vaga rejeitada",key:"demo-main"}),this.reloadTable()},error:a=>{this.messageService.add({severity:"error",summary:"Oops",detail:a.error?.message??"Um erro ocorreu. Tente novamente",key:"demo-main"})}});this.subscriptions.push(t)}reloadPage(){this.router.navigate([this.router.url],{skipLocationChange:!0})}onPage(e){this.first=e.first,this.rows=e.rows,this.reloadTable()}onLazyLoad(e){console.log(JSON.stringify(e)),this.first=e.first??0,this.rows=e.rows??10,typeof e.globalFilter=="string"?this.search=e.globalFilter:typeof e.globalFilter=="object"&&e.globalFilter&&(this.search=e.globalFilter.join(" ")),this.reloadTable()}reloadTable(){let e=this.first/this.rows;this.vagas$=this.apiService.getAllReceived(this.search,e,this.rows)}getSeverity(e){return e=="aprovado"?"success":e=="rejeitado"?"danger":"secondary"}setTotalRecords(e){this.totalVagas=e??0}};l.\u0275fac=function(t){return new(t||l)(b(U),b(z),b(E),b(j),b(R))},l.\u0275cmp=S({type:l,selectors:[["app-moderation"]],standalone:!0,features:[T([E]),k],decls:22,vars:5,consts:[["skeleton",""],["cd",""],["dt1",""],["input",""],["tag",""],[1,"p-4","mt-4"],[1,"mb-6"],[1,"text-4xl"],[1,"bg-teal-50","flex","flex-column","gap-1","p-3","m-2","w-11","text-color-secondary"],[1,"text-red-700"],["dataKey","id",3,"rows","rowsPerPageOptions","paginator","showCurrentPageReport","totalRecords","first","lazy","pageLinks","lazyLoadOnInit","globalFilterFields","value","onLazyLoad",4,"ngIf","ngIfElse"],["styleClass","delete-dialog","styleClass","w-11 md:w-4","closable","true"],["pTemplate","message"],["pTemplate","footer"],["dataKey","id",3,"onLazyLoad","rows","rowsPerPageOptions","paginator","showCurrentPageReport","totalRecords","first","lazy","pageLinks","lazyLoadOnInit","globalFilterFields","value"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","gap-2"],["iconPosition","right",1,"ml-auto"],["pInputText","","type","text","placeholder","Busca"],[1,"cursor-pointer"],[1,"pi","pi-search",3,"click"],[3,"rounded","value","severity"],["icon","pi pi-eye","title","Ver",3,"onClick","rounded","text"],["icon","pi pi-thumbs-up","title","Aceitar",3,"onClick","rounded","text","disabled"],["icon","pi pi-thumbs-down","title","Rejeitar",3,"onClick","rounded","text","disabled"],["colspan","5"],["dataKey","id",3,"onPage","rows","rowsPerPageOptions","paginator","showCurrentPageReport","first","lazy","pageLinks","globalFilterFields","value"],[1,"flex","flex-column","align-items-center","w-full","gap-3","border-bottom-1","surface-border"],[1,"pi","pi-thumbs-up","text-6xl","text-green-500"],[1,"pi","pi-thumbs-down","text-6xl","text-red-500"],[1,"flex","flex-wrap","px-0","md:px-5","gap-3","justify-content-between"],["type","button","pButton","","label","Cancelar",1,"p-button-secondary",3,"click"],["type","button","pButton","","label","Confirmar",1,"p-button-primary",3,"click"]],template:function(t,a){if(t&1&&(i(0,"div",5)(1,"div",6)(2,"h1",7),s(3,"Modera\xE7\xE3o de Vagas Recebidas"),n(),i(4,"div",8)(5,"span"),s(6,"Nesta se\xE7\xE3o, voc\xEA visualiza todas as vagas que outras organiza\xE7\xF5es est\xE3o compartilhando com a sua institui\xE7\xE3o"),n(),i(7,"span")(8,"strong",9),s(9,"Nunca compartilhe esta visualiza\xE7\xE3o com seus estudantes"),n(),s(10,", pois vagas rejeitadas ou com modera\xE7\xE3o pendente ser\xE3o vis\xEDveis por eles"),n()()(),g(11,me,8,15,"p-table",10),M(12,"async"),i(13,"div")(14,"p"),s(15),n()(),g(16,ue,3,12,"ng-template",null,0,V),i(18,"p-confirmDialog",11,1),g(20,fe,5,2,"ng-template",12)(21,xe,3,0,"ng-template",13),n()()),t&2){let y=x(17);p(11),f("ngIf",I(12,3,a.vagas$))("ngIfElse",y),p(4),C("Total de vagas: ",a.totalVagas,"")}},dependencies:[L,F,P,G,q,O,$,D,A,H,Q,K,J,X,W,N,B,te,ee,Z,Y]});let o=l;return o})();export{Je as ModerationComponent};
